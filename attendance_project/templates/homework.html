<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Homework Entry</title>
    <style>
        body {
            font-family: "Segoe UI", Tahoma, sans-serif;
            max-width: 950px;
            margin: 30px auto;
            padding: 20px;
            background: linear-gradient(135deg, #eef6ff, #f9f9f9);
            color: #333;
        }
        h1 { color: #1e3d59; text-align: center; }
        form {
            background: #ffffff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 12px rgba(0,0,0,0.15);
            margin-bottom: 20px;
            border-left: 6px solid #1abc9c;
        }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; border-radius: 8px; overflow: hidden; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: center; }
        th { background-color: #34495e; color: white; }
        tr:nth-child(even) { background-color: #f0f9ff; }
        tr:nth-child(odd) { background-color: #fdf6ff; }

        .marks-input {
            width: 80px;
            background: #fff8dc;
            border: 1px solid #f39c12;
            border-radius: 5px;
            padding: 5px;
        }

        button {
            margin-top: 15px; padding: 10px 18px;
            background: linear-gradient(135deg, #1abc9c, #3498db);
            color: white; border: none; border-radius: 6px;
            cursor: pointer; font-size: 1em; font-weight: bold;
            transition: all 0.3s ease;
        }
        button:hover { background: linear-gradient(135deg, #16a085, #2980b9); transform: scale(1.05); }

        #toggleRecordsBtn {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
        }
        #toggleRecordsBtn:hover {
            background: linear-gradient(135deg, #8e44ad, #6c3483);
        }

        .records-section {
            background: #fefcff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 12px rgba(0,0,0,0.15);
            margin-top: 20px;
            border-left: 6px solid #9b59b6;
        }
        .no-records { font-style: italic; color: #888; }
        .doubt-box {
            margin-top: 20px;
            padding: 15px;
            background: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>ğŸ“˜ Homework Entry for {{ current_date }}</h1>

    <form method="POST">
        <label><b>Date:</b></label>
        <input type="date" name="date" required />

        <label><b>Course:</b></label>
        <select name="course" required>
            {% for course in courses %}
            <option value="{{ course }}">{{ course }}</option>
            {% endfor %}
        </select>

        <label><b>Homework Description:</b></label>
        <textarea name="description" rows="3" placeholder="Enter homework details..."></textarea>

        <h3 style="color:blue;">ğŸ”‘ Teacher Section</h3>
        <input type="password" id="teacherPass" placeholder="Enter Teacher Password" />
        <button type="button" onclick="enableMarks()">ğŸ”“ Unlock Marks</button>

        <!-- Marks Table Only -->
        <table>
            <thead>
                <tr>
                    <th>Student</th>
                    <th>Marks</th>
                </tr>
            </thead>
            <tbody>
            {% for student in students %}
            <tr>
                <td><b>{{ student }}</b></td>
                <td><input type="text" class="marks-input" name="{{ student }}_marks" placeholder="Marks" disabled /></td>
            </tr>
            {% endfor %}
            </tbody>
        </table>

        <div class="doubt-box">
            <label><b>â“ Have any doubts?</b></label>
            <textarea name="doubt" rows="3" placeholder="Ask your question here..."></textarea>
        </div>

        <button type="submit">âœ… Save / Submit</button>
    </form>

    <button id="toggleRecordsBtn">ğŸ“‚ View Homework Records</button>

    <div class="records-section" id="homeworkRecords" style="display: none;">
        <h2>ğŸ“‘ Submitted Homework Records</h2>
        {% if homework_records %}
            {% for date, courses_dict in homework_records.items() %}
                <h3 style="color:blue;">ğŸ“… Date: {{ date }}</h3>
                {% for course, course_data in courses_dict.items() %}
                    <h4 style="color:green;">ğŸ“˜ Course: {{ course }}</h4>
                    {% if course_data.description %}
                        <p><strong style="color:violet;">ğŸ“ Description:</strong> {{ course_data.description }}</p>
                    {% endif %}
                    <table>
                        <thead>
                            <tr style="background:orange; color:white;">
                                <th>Student</th>
                                <th>Marks</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for student, mark in course_data.marks.items() %}
                            <tr>
                                <td>{{ student }}</td>
                                <td style="color:blue;">{{ mark }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                {% endfor %}
            {% endfor %}
        {% else %}
            <p class="no-records">No homework records submitted yet.</p>
        {% endif %}
    </div>

    <script>
        function enableMarks() {
            const pass = document.getElementById("teacherPass").value;
            if (pass === "teacher123") {
                document.querySelectorAll(".marks-input").forEach(el => el.disabled = false);
                alert("âœ… Marks unlocked for teacher!");
            } else {
                alert("âŒ Wrong password!");
            }
        }
        const btn = document.getElementById('toggleRecordsBtn');
        const recordsDiv = document.getElementById('homeworkRecords');
        btn.addEventListener('click', () => {
            if (recordsDiv.style.display === 'none') {
                recordsDiv.style.display = 'block';
                btn.textContent = 'ğŸ“‚ Hide Homework Records';
            } else {
                recordsDiv.style.display = 'none';
                btn.textContent = 'ğŸ“‚ View Homework Records';
            }
        });
    </script>
    <a href="{{ url_for('front') }}" class="btn-nav">ğŸ  Back to Front Page</a>
</body>
</html>
